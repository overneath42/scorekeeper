<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>New Game - Scorekeeper</title>
  </head>
  <body class="h-screen overflow-hidden">
    <x-game-store-provider>
      <main class="h-full flex flex-col container mx-auto max-w-2xl">
        <header class="flex-shrink-0 py-6 px-4 flex flex-col-reverse gap-2">
          <h1 id="page-title" class="text-2xl font-bold text-gray-900">Start A New Game</h1>
          <a href="games.html" class="btn-sm btn-secondary mb-2 self-start"
            >&larr; Cancel</a
          >
        </header>

        <div class="flex-1 overflow-auto px-4 pb-6">
          <x-game-form id="game-form"></x-game-form>
        </div>
      </main>
    </x-game-store-provider>

    <script type="module" src="/src/main.ts"></script>
    <script type="module">
      document.addEventListener("DOMContentLoaded", () => {
        const gameForm = document.getElementById("game-form");
        const pageTitle = document.getElementById("page-title");

        // Update page title based on edit mode
        const updatePageTitle = () => {
          if (gameForm.isEditMode) {
            pageTitle.textContent = "Edit Game";
            document.title = "Edit Game - Scorekeeper";
          } else {
            pageTitle.textContent = "Start A New Game";
            document.title = "New Game - Scorekeeper";
          }
        };

        // Initial check
        updatePageTitle();

        // Listen for changes (in case the form updates its mode)
        const observer = new MutationObserver(updatePageTitle);
        observer.observe(gameForm, { attributes: true, attributeFilter: ['iseditmode'] });
      });
    </script>
  </body>
</html>
